# Структури даних Set, Map, WeakSet, WeakMap. Робота з JSON.

## Зміст
1. Set
1. Map
1. WeakSet
1. WeakMap
1. JSON

#
## Set

`Set` - структура даних, схожа на масив, котрий зберігає тільки `унікальні` значення. Для створення безлічі застосовується конструктор цього об'єкта:

```javascript
const mySet = new Set();
console.log(mySet); // Set(0)

const numbers = new Set([1, 1, 2, 3, 4, 5, 2, 4]);
console.log(numbers); // Set(5) {1, 2, 3, 4, 5}
```

### Методи об'єкта `Set`

| Метод (функція) / Параметр | Опис |
|----------------------------|------|
| `size`                          | кількість значення у переліку  |
| `add(value)`                    | додає нове унікальне значення до переліку, де `value` - значення  |
| `delete(value)`                 | видаляє значення з переліку, де `value` - значення |
| `has(value)`                    | перевіряє наявність значення у переліку, де `value` - значення, повертає булеве значення |
| `forEach((value, i, set) => {})`| цикл для перебору значень структури `Set`, де `value` - значення, `i` - індекс, `set` - увесь `Set` |
| `keys()`                        | повертає усі індекси структури |
| `values()`                      | повертає усі значення структури |
| `entries()`                     | повертає усі індекси та значення структури|

#
## Map

`Map` є структурою даних схожою на `словник`, де кожен елемент має `ключ` і `значення`. Ключі в рамках карти є унікальними, тобто з одним ключем можна порівняти лише один елемент. Для створення карти застосовується конструктор об'єкта `Map`. Можна також ініціалізувати з початковими значеннями. Для цього в конструктор передається масив, елементи якого представляють масиви з двох елементів - перший елемент виступатиме як `ключ`, а другий - як `значення`.

```javascript
const myMap1 = new Map();
console.log(myMap1);

const myMap2 = new Map([[1, "a"], [2, "b"], [3, "c"]]);
console.log(myMap2); // Map(3) {1 => "a", 2 => "b", 3 => "c"}
```

Ключі та значення необов'язково мають бути одного типу.

```javascript
const myMap3 = new Map([["a", 1], [2, "b"], ["c", true]]);
console.log(myMap3); // Map(3) {"a" => 1, 2 => "b", "c" => true}
```

| Метод (функція) / Параметр | Опис |
|----------------------------|------|
| `size`                            | кількість записів у словнику  |
| `set(key, value)`               | додає нові ключ та значення до списка, де `key` - ключ та `value` - значення  |
| `get(key)`                        | повертає значення за ключем, де `key` - ключ  |
| `has(key)`                        | перевіряє наявність значення за ключем, де `key` - ключ, повертає булеве значення |
| `delete(key)`                     | видаляє значення за ключем, де `key` - значення |
| `clear()`                         | видаляє усі знеачення зі списку |
| `forEach((value, key, map) => {})`| цикл для перебору значень структури `Map`, де `value` - значення, `key` - індекс, `map` - увесь `Map` |
| `keys()`                          | повертає усі ключі структури |
| `values()`                        | повертає усі значення структури |

| `entries()`                       | повертає усі індекси та значення структури|


#
## WeakSet

`WeakSet` багато в чому нагадує звичайнчий `Set`. Він також може зберігати лише унікальні значення, але кожний його елемент має представляти об'єкт.

Для створення об'єкта `WeakSet` використовується його конструктор, який можна передати початкові значення:

```javascript
// Порожній WeakSet
const weakSet = new WeakSet();
// ініціалізація початковими значеннями
const weakSet = new WeakSet([
     { lang: "C", created: new Date("1972") },
     { lang: "C++", created: new Date("1985") },
     { lang: "C#", created: new Date("2001") },
     { lang: "Java", created: new Date("1995") },
     { lang: "JavaScript", created: new Date("1995") },
     { lang: "TypeScript", created: new Date("2012") }
]);
```
Для ініціалізації як у випадку з об'єктом `Set` конструктор передається масив, але даний масив містить саме об'єкти, а не скалярні значення, типу чисел або рядків.

| Метод (функція) / Параметр | Опис |
|----------------------------|------|
| `add(value)`                    | додає нове унікальне значення до переліку, де `value` - значення  |
| `delete(value)`                 | видаляє значення з переліку, де `value` - значення |
| `has(value)`                    | перевіряє наявність значення у переліку, де `value` - значення, повертає булеве значення |


### Перебір WeakSet
Варто відзначити, що `WeakSet` не підтримує перебір ні за допомогою методу `forEach`, якого `WeakSet` немає, ні за допомогою циклу `for`.

### Слабкі посилання
Об'єкти передаються до `WeakSet` за посиланням. І коли об'єкт перестає існувати через різні причини, він видаляється з `WeakSet`.

#
## WeakMap

WeakMap представляє розвиток колекції Map. Особливістю WeakMap і те, що її елементи повинні представляти об'єкти. У цьому ключі повинні представляти об'єкти.

Створення WeakMap:

```javascript

// Порожній WeakMap
const weakMap = new WeakMap();
 
// WeakMap з ініціалізацією даними
const weakMap2 = new WeakMap([
     [{ key: "C" }, { lang: "C", created: new Date("1972") }]
     [{ key: "C++" }, { lang: "C++", created: new Date("1985") }]
     [{ key: "C#" }, { lang: "C#", created: new Date("2001") }]
     [{ key: "Java" }, { lang: "Java", created: new Date("1995") }]
     [{ key: "JavaScript"}, { lang: "JavaScript", created: new Date("1995") }]
     [{ key: "TypeScript"}, { lang: "TypeScript", created: new Date("2012") }]
]);
```
Слід зазначити, що об'єкт WeakMap не підтримує перебір.

| Метод (функція) / Параметр | Опис |
|----------------------------|------|
| `set(key, value)`               | додає нові ключ та значення до списка, де `key` - ключ та `value` - значення  |
| `get(key)`                        | повертає значення за ключем, де `key` - ключ  |
| `has(key)`                        | перевіряє наявність значення за ключем, де `key` - ключ, повертає булеве значення |
| `delete(key)`                     | видаляє значення за ключем, де `key` - значення |

### Перебір WeakMap
Варто відзначити, що `WeakMap` не підтримує перебір ні за допомогою методу `forEach`, якого `WeakMap` немає, ні за допомогою циклу `for`.

### Слабкі посилання
Об'єкти передаються до WeakMap за посиланням. І коли об'єкт перестає існувати через різні причини, він видаляється з WeakMap.


#
## JSON

### JavaScript Object Notation 
`JSON (JavaScript Object Notation)` формат зберігання даних у формі схожій на обе'єкти у `JavaScript`. Простота `JSON` призвела до того, що зараз це найпопулярніший формат передачі даних у мережі Інтернет, витіснивши інший колись популярний формат `XML`.

JSON підтримує три типи даних:
- примітивні значення (рядки, числа, null, true і false);
- об'єкти
- масиви.

```json
{
     "name": "Tom",
     "married": true,
     "age": 30
}
```
У `JavaScript` цьому об'єкту відповідав би наступний:

```javascript
var user = {
     name: "Tom",
     married: true,
     age: 30
}
```
Незважаючи на загальну подібність, в той же час є і відмінності:
- у JSON назви властивостей полягають у лапки, як звичайні рядки;
- об'єкти JSON не можуть зберігати функції, змінні, як об'єкти JavaScript.


Об'єкти можуть бути складними:

```json
{
     "name": "Tom",
     "married": true,
     "age": 30,
     "company": {
         "name": "Microsoft",
         "address": "USA, Redmond"
     }
}
```
Масиви в JSON схожі на масиви javascript і також можуть зберігати найпростіші дані або об'єкти

```json

[{
     "name": "Tom",
     "married": true,
     "age": 30
}, {
     "name": "Alice",
     "married": false,
     "age": 23
}]
```

### Серіалізація в JSON та десеріалізація

Для серіалізації об'єкта `JavaScript` у `JSON` застосовується функція `JSON.stringify()`.
Для зворотної операції - десеріалізації або парсингу `JSON`-об'єкта в javascript застосовується метод `JSON.parse()`:
```javascript

const user = {
     name: "Tom",
     married: true,
     age: 30
};
const serializedUser = JSON.stringify(user);
console.log(serializedUser); // {"name":"Tom","married":true,"age":30}
console.log(typeof serializedUser); // string

const tomUser = JSON.parse(serializedUser); 
console.log(typeof tomUser); // object
console.log(tomUser.name); // Tom
```